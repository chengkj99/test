
## 动态内容加速技术
##### 概述
1. 第六章是关于静态内容加速的范畴；
2. Web系统由表现层、业务逻辑层、数据访问层这三层组成；    
3. 静态内容的加速都是对表现层的加速；动态内容的加速则要涉及逻辑层、和数据访问层的加速技术。  
4. 典型Web系统逻辑架构的演变：Web系统由表现层、业务逻辑层、数据访问层、用户数据层(用户主动提供、行为分析得出);
5. CDN的复制：对变现层、业务逻辑层(边缘计算)、数据访问层(数据库复制)、用户文件的复制；  

##### 边缘计算
  将应用程序、数据和计算能力（服务），从网络的少量集中点推送到网络的边缘位置；  
##### 数据库复制
部分复制：a.不感知内容的缓存，b.感知内容的缓存   
整体复制：c.数据库整体复制  

##### 用户数据复制
用户数据层依托于数据访问层而实现；  
需要考虑安全保密和用户隐私；

## 应用加速技术

##### 概述
背景：  
Host -> Terminal,高度集中的模型 向 大量分布式的Client／Server: 互联网经历了一个由 Host 到 Terminal，这种 高度集中的模型 向 大量分布式的Client／Server 模式演变。   
全球化，专业人士分布在全球各个地方，而彼此的沟通却要求在一个办公室一样。  

挑战：  
一是分支点的信息控制带来的信息安全和数据一致性问题。   
二是应用系统的性能问题。  

措施：
信息化的基础设施进行再中心化：
1. 首先：将信息存储和应用控制点集中，以此降低安全风险；
2. 其次：通过将IT基础设施集中，进一步提高效率和降低成本。

这样又出现一个挑战，就是需要高速广域网和高性能保障，这就是应用交付提出的技术背景。


应用加速网络（ADN）目标：   
  1. 提高用户和IT部门的生产力
  2. 对各种应用进行加速
  3. 节省广域网带宽使用
  4. 减少远程机构对IT设施的需求

所需技术： 负载均衡、TCP优化管理、链接管理、SSL VPN、压缩优化、智能网络地址转换、高级路由、智能端口镜像。

重点介绍广域网加速和SSL加速技术

##### 广域网加速技术

问题分析：  
  由于衡量广域网性能和质量的主要指标是 带宽 和 时延。

所以我们需要知道产生这两个问题的原因：

1. 带宽问题原因: 广域网的带宽成本大于局域网。  
2. 传输时延问题原因:  时延对整个链路的数据吞吐量比带宽影响更大。
  a. 物理距离：光速传送，经过路由和交换机设备
  b. TCP协议的工作机制：1. 受制于TCP窗口的大小：发送和接受方都会维护一个数据帧的序列，这个序列被称作窗口。2. TCP协议的慢启动和拥塞控制行为。 ？TCP窗口，响应确认机制
3. 应用协议工作效率低的问题：比如windows的CIFS协议，多次握手和确认等机制导致数据延迟。

广域网加速的关键技术：

针对带宽不足：一是加大IT投入，对带宽进行扩容和升级。二是减少跨越广域网的数据传输量。（压缩和缓存技术）
时延问题：
  a. 在广域网的两端（客户端和服务端）成对部署设备；
  b. 通过对TCP协议的优化，实现整个传输过程的优化；
应用协议低效问题：对应用协议进行传输的过程进行改进。

技术原理如图所示【img】

广域网加速的关键技术：  
1. 数据层面的传输优化技术：数据切片、数据索引压缩、数据缓存、数据重构
2. TCP协议优化技术：如重复数据删除，高速TCP传输技术是常见的TCP协议优化技术（1，2，3）
3. 应用协议优化技术：将广域网的TCP链接数，转换成在本地应用加速设备上完成。


##### SSL加速技术介绍

概述：  
  1. HTTPS => HTTP+SSL：SSL会话过程消耗性能和计算资源。
  2. SSL加速技术就是将SSL握手过程的处理任务交给专用硬件设备，将除去了SSL层的HTTP内容交给服务器。

SSL的基本原理与实现:  
  因为IP协议和TCP协议都没有安全性，所以SSL提出满足以下思想要求：可认证性、隐私性、完整性、不可抵赖性。

SSL：
  1. 成对密钥的公钥加密系统；
    a.发送者使用接收者的公钥加密，只有接收者能够解密。
    b.发送者使用自己的私钥加密，接收者只有使用发送者的公钥才能解密。
  2. 证书管理机构签名的数字证书保证了身份的真实性（绑定了密钥和身份的对应信息）。（避免了拿到公钥的冒名顶替者）

所以：SSL会话初始的密钥交换和后续的数据加解密的密集计算过程给服务器带来很大压力，使其它事务处理能力大大降低。

SSL加速的基本原理和实现：
  SSL加速通常指基于硬件的SSL实现，利用专门的硬件设备处理SSL任务： 基于服务器的加速板卡、基于专用加速设备两类方法。

SSL加板卡：可能采用CPU、ASIC芯片或RISC指令集芯片造成的协同处理器；
  每秒至少能够处理几百个SSL事务。
  一般情况，Web服务器每秒需要管理数千个加密事务，加上板卡，Web服务器的事务处理能力就不受任何影响。
  问题：
    1. 但是Web事务很多时，会使用负载均衡，由于负载均衡设备无法看到cookie信息等会话信息，就无法保持会话连续性。
    2. 集群中每台服务器都必须具备唯一性的数字证书，而证书的购买、部署、维护增加了SSL的实现成本。

SSL加速设备：嵌入了SSL加速板卡的独立设备。
工作方式：解密后转发给后台服务器。
优势是可扩展性强。
在很多应用场景下，SSL加速设备都是和负载均衡设备一体实现的，这样能保持会话以及降低成本。
