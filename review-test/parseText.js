const data = {
  diffList: [
    {
      type: "zoneCheck",
      diff: 1,
      zoneID: "155788852635",
      isRegion: 1,
      zoneDiff: 1,
      srcStoreNum: 0,
      desStoreNum: 0
    },
    {
      type: "zoneCheck",
      diff: 1,
      zoneID: "1558519316124",
      zoneType: 5,
      zoneDiff: 1,
      srcStoreNum: 0,
      desStoreNum: 0
    },
    {
      type: "zoneCheck",
      diff: 1,
      zoneID: "155851921598",
      zoneType: 3,
      zoneDiff: 1,
      srcStoreNum: 0,
      desStoreNum: 0
    },
    {
      type: "zoneCheck",
      diff: 1,
      zoneID: "1558519301104",
      zoneType: 2,
      zoneDiff: 1,
      srcStoreNum: 0,
      desStoreNum: 0
    },
    {
      type: "zoneCheck",
      diff: 1,
      zoneID: "1558519309117",
      zoneType: 2,
      zoneDiff: 1,
      srcStoreNum: 0,
      desStoreNum: 0
    },
    {
      type: "zoneCheck",
      diff: 2,
      zoneID: "1557888628118",
      zoneType: 4,
      zoneDiff: 2,
      srcStoreNum: 0,
      desStoreNum: 0
    },
    {
      type: "zoneCheck",
      diff: 2,
      zoneID: "1557902599458",
      zoneType: 5,
      zoneDiff: 2,
      srcStoreNum: 0,
      desStoreNum: 0
    },
    {
      type: "nodeCheck",
      diff: 3,
      nodeID: "155788983275",
      nodeDiff: 3,
      distanceX: -1500,
      distanceY: -4500
    },
    {
      type: "nodeCheck",
      diff: 3,
      nodeID: "155788983290",
      nodeDiff: 3,
      distanceX: -2500,
      distanceY: -4500
    },
    {
      type: "nodeCheck",
      diff: 3,
      nodeID: "1557889832105",
      nodeDiff: 3,
      distanceX: -3500,
      distanceY: -4500
    },
    {
      type: "nodeCheck",
      diff: 3,
      nodeID: "1557889832120",
      nodeDiff: 3,
      distanceX: -4500,
      distanceY: -4500
    },
    {
      type: "nodeCheck",
      diff: 3,
      nodeID: "1557889832135",
      nodeDiff: 3,
      distanceX: -5500,
      distanceY: -4500
    },
    {
      type: "nodeCheck",
      diff: 3,
      nodeID: "155788983261",
      nodeDiff: 3,
      distanceX: -500,
      distanceY: -3500
    },
    {
      type: "nodeCheck",
      diff: 3,
      nodeID: "155788983276",
      nodeDiff: 3,
      distanceX: -1500,
      distanceY: -3500
    },
    {
      type: "nodeCheck",
      diff: 3,
      nodeID: "155788983291",
      nodeDiff: 3,
      distanceX: -2500,
      distanceY: -3500
    },
    {
      type: "nodeCheck",
      diff: 3,
      nodeID: "1557889832106",
      nodeDiff: 3,
      distanceX: -3500,
      distanceY: -3500
    },
    {
      type: "nodeCheck",
      diff: 3,
      nodeID: "1557889832121",
      nodeDiff: 3,
      distanceX: -4500,
      distanceY: -3500
    },
    {
      type: "nodeCheck",
      diff: 3,
      nodeID: "1557889832136",
      nodeDiff: 3,
      distanceX: -5500,
      distanceY: -3500
    },
    {
      type: "nodeCheck",
      diff: 3,
      nodeID: "155788983262",
      nodeDiff: 3,
      distanceX: -500,
      distanceY: -2500
    },
    {
      type: "nodeCheck",
      diff: 3,
      nodeID: "155788983277",
      nodeDiff: 3,
      distanceX: -1500,
      distanceY: -2500
    },
    {
      type: "nodeCheck",
      diff: 3,
      nodeID: "155788983292",
      nodeDiff: 3,
      distanceX: -2500,
      distanceY: -2500
    },
    {
      type: "nodeCheck",
      diff: 3,
      nodeID: "1557889832107",
      nodeDiff: 3,
      distanceX: -3500,
      distanceY: -2500
    },
    {
      type: "nodeCheck",
      diff: 3,
      nodeID: "1557889832122",
      nodeDiff: 3,
      distanceX: -4500,
      distanceY: -2500
    },
    {
      type: "nodeCheck",
      diff: 3,
      nodeID: "155788983274",
      nodeDiff: 3,
      distanceX: -1500,
      distanceY: -5500
    },
    {
      type: "nodeCheck",
      diff: 3,
      nodeID: "155788983263",
      nodeDiff: 3,
      distanceX: -500,
      distanceY: -1500
    },
    {
      type: "nodeCheck",
      diff: 3,
      nodeID: "155788983278",
      nodeDiff: 3,
      distanceX: -1500,
      distanceY: -1500
    },
    {
      type: "nodeCheck",
      diff: 3,
      nodeID: "155788983293",
      nodeDiff: 3,
      distanceX: -2500,
      distanceY: -1500
    },
    {
      type: "nodeCheck",
      diff: 3,
      nodeID: "1557889832108",
      nodeDiff: 3,
      distanceX: -3500,
      distanceY: -1500
    },
    {
      type: "nodeCheck",
      diff: 3,
      nodeID: "1557889832123",
      nodeDiff: 3,
      distanceX: -4500,
      distanceY: -1500
    },
    {
      type: "nodeCheck",
      diff: 3,
      nodeID: "1557889832138",
      nodeDiff: 3,
      distanceX: -5500,
      distanceY: -1500
    },
    {
      type: "nodeCheck",
      diff: 3,
      nodeID: "155788983264",
      nodeDiff: 3,
      distanceX: -500,
      distanceY: -500
    },
    {
      type: "nodeCheck",
      diff: 3,
      nodeID: "155788983279",
      nodeDiff: 3,
      distanceX: -1500,
      distanceY: -500
    },
    {
      type: "nodeCheck",
      diff: 3,
      nodeID: "155788983294",
      nodeDiff: 3,
      distanceX: -2500,
      distanceY: -500
    },
    {
      type: "nodeCheck",
      diff: 3,
      nodeID: "1557889832109",
      nodeDiff: 3,
      distanceX: -3500,
      distanceY: -500
    },
    {
      type: "nodeCheck",
      diff: 3,
      nodeID: "1557889832124",
      nodeDiff: 3,
      distanceX: -4500,
      distanceY: -500
    },
    {
      type: "nodeCheck",
      diff: 3,
      nodeID: "1557889832139",
      nodeDiff: 3,
      distanceX: -5500,
      distanceY: -500
    },
    {
      type: "nodeCheck",
      diff: 3,
      nodeID: "155788983259",
      nodeDiff: 3,
      distanceX: -500,
      distanceY: -5500
    },
    {
      type: "nodeCheck",
      diff: 3,
      nodeID: "155788983289",
      nodeDiff: 3,
      distanceX: -2500,
      distanceY: -5500
    },
    {
      type: "zoneCheck",
      diff: 3,
      zoneID: "155788856852",
      zoneType: 2,
      zoneDiff: 3,
      srcStoreNum: 6,
      desStoreNum: 6
    },
    {
      type: "nodeCheck",
      diff: 3,
      nodeID: "1557889832104",
      nodeDiff: 3,
      distanceX: -3500,
      distanceY: -5500
    },
    {
      type: "nodeCheck",
      diff: 3,
      nodeID: "1557889832119",
      nodeDiff: 3,
      distanceX: -4500,
      distanceY: -5500
    },
    {
      type: "nodeCheck",
      diff: 3,
      nodeID: "1557889832134",
      nodeDiff: 3,
      distanceX: -5500,
      distanceY: -5500
    },
    {
      type: "zoneCheck",
      diff: 3,
      zoneID: "15578976081459",
      zoneType: 2,
      zoneDiff: 3,
      srcStoreNum: 0,
      desStoreNum: 0
    },
    {
      type: "zoneCheck",
      diff: 3,
      zoneID: "15578976241494",
      zoneType: 2,
      zoneDiff: 3,
      srcStoreNum: 0,
      desStoreNum: 0
    },
    {
      type: "nodeCheck",
      diff: 3,
      nodeID: "155788983260",
      nodeDiff: 3,
      distanceX: -500,
      distanceY: -4500
    },
    {
      type: "nodeCheck",
      diff: 3,
      nodeID: "1557889832137",
      nodeDiff: 3,
      distanceX: -5500,
      distanceY: -2500
    },
    {
      type: "mapCheck", // 楼层
      diff: 2, // 修改类型 1增加,2删除,3变更
      mapID: "155788983275",
      mapDiff: 2,
      distanceX: -1500, // x偏移
      distanceY: -4500, // y偏移
      distanceZ: 1 // z偏移
    }
  ]
};

const checkMapTypes = {
  nodeCheck: "nodeCheck",
  zoneCheck: "zoneCheck",
  mapCheck: "mapCheck"
};
const checkMapTypeNameMap = {
  [checkMapTypes.nodeCheck]: "索引点",
  [checkMapTypes.zoneCheck]: "",
  [checkMapTypes.mapCheck]: "楼层"
};

const diffTypes = {
  add: 1,
  delete: 2,
  change: 3
};
const diffTypeNameMap = {
  [diffTypes.add]: "新增",
  [diffTypes.delete]: "删除",
  [diffTypes.change]: "变化"
};
const diffTypeStyleMap = {
  [diffTypes.add]: "success",
  [diffTypes.delete]: "danger",
  [diffTypes.change]: "primary"
};

const zoneTypes = {
  storageArea: 2,
  site: 4
};
const zoneTypeNameMap = {
  [zoneTypes.storageArea]: "存储区",
  [zoneTypes.site]: "站点"
};

const zoneRegionTypes = {
  regionNameUpdate: "regionNameUpdate",
  regionTypeUpdate: "regionTypeUpdate",
  regionStationUpdate: "regionStationUpdate",
  regionStoreUpdate: "regionStoreUpdate"
};
const zoneRegionTypeNameMap = {
  [zoneRegionTypes.regionNameUpdate]: "名称",
  [zoneRegionTypes.regionTypeUpdate]: "类型",
  [zoneRegionTypes.regionStationUpdate]: "关联站点",
  [zoneRegionTypes.regionStoreUpdate]: "关联储存区"
};

function parse(data) {
  let result = [];
  const diffList = data.diffList;
  diffList.forEach(item => {
    if (item.type === checkMapTypes.nodeCheck) {
      result.push(parseNode(item));
    }
    if (
      item.type === checkMapTypes.zoneCheck &&
      Object.values(zoneTypes).includes(item.zoneType)
    ) {
      result.push(parseZone(item));
    }
    if (item.type === checkMapTypes.zoneCheck && item["isRegion"] === 1) {
      result.push(parseRegionZone(item));
    }
    if (item.type === checkMapTypes.mapCheck) {
      result.push(parseMap(item));
    }
  });
  return result;
}

function getDirection(value, axisType) {
  if (axisType === "x") {
    return value < 0 ? "西" : "东";
  }
  if (axisType === "y") {
    return value < 0 ? "南" : "北";
  }
}
function getAddAndDeleteText(title, id, diffType) {
  return {
    value: `${title}${id}被${diffTypeNameMap[diffType]}`,
    style: diffTypeStyleMap[diffType]
  };
}
function parseNode(item) {
  const title = "索引点";
  if (item.diff === diffTypes.add || item.diff === diffTypes.delete) {
    return getAddAndDeleteText(title, item.nodeID, item.diff);
  }
  if (item.diff === diffTypes.change) {
    let directionX = getDirection(item.distanceX, "x");
    let directionY = getDirection(item.distanceY, "y");
    let deviationX = !!item.distanceX
      ? `向${directionX}偏移${Math.abs(item.distanceX)}`
      : "";
    let deviationY = !!item.distanceX
      ? `向${directionY}偏移${Math.abs(item.distanceY)}`
      : "";
    return {
      value: `${title}${item.nodeID}${deviationX}${deviationY}`,
      style: diffTypeStyleMap[item.diff]
    };
  }
  return "";
}

function parseRegionZone(item) {
  const title = "智能库区";
  if (item.diff === diffTypes.add || item.diff === diffTypes.delete) {
    return getAddAndDeleteText(title, item.zoneID, item.diff);
  }
  if (item.diff === diffTypes.change) {
    return {
      value: `${title}${item.zoneID}的${
        zoneRegionTypeNameMap[item.regionType]
      }由${item.oldValue}变成${item.newValue}`,
      style: diffTypeStyleMap[item.diff]
    };
  }
}
function parseZone(item) {
  const title = zoneTypeNameMap[item.zoneType];
  if (item.diff === diffTypes.add || item.diff === diffTypes.delete) {
    return getAddAndDeleteText(title, item.zoneID, item.diff);
  }
  if (item.diff === diffTypes.change) {
    return {
      value: `${title}${item.zoneID}的容纳载具数由${item.srcStoreNum}变成${
        item.desStoreNum
      }`,
      style: diffTypeStyleMap[item.diff]
    };
  }
}

function parseMap(item) {
  const title = "楼层地图";
  if (item.diff === diffTypes.add || item.diff === diffTypes.delete) {
    return getAddAndDeleteText(title, item.mapID, item.diff);
  }
}

const res = parse(data);

console.log(res, res.length);
